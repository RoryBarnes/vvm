

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; VVM 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f2a433a1"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Authentication and Security" href="security.html" />
    <link rel="prev" title="Quick Start" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/VPLanetLogo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quick Start</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#workspace-layout">Workspace Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#persistence">Persistence</a></li>
<li class="toctree-l2"><a class="reference internal" href="#branch-management">Branch Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#git-workflow">Git Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#repos-conf">repos.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="#display-forwarding">Display Forwarding</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installed-packages">Installed Packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vs-code">VS Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#claude-code-optional">Claude Code (Optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#container-utilities">Container Utilities</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tab-completion">Tab Completion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#resource-allocation">Resource Allocation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Authentication and Security</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/RoryBarnes/vvm">GitHub</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">VVM</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h1>
<section id="commands">
<h2>Commands<a class="headerlink" href="#commands" title="Link to this heading"></a></h2>
<p>Run <code class="docutils literal notranslate"><span class="pre">VVM</span></code> from the host with the following options:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vvm<span class="w">                   </span><span class="c1"># Start an interactive shell</span>
vvm<span class="w"> </span>&lt;command&gt;<span class="w">         </span><span class="c1"># Run a command inside the container</span>
vvm<span class="w"> </span>--build<span class="w">           </span><span class="c1"># Force rebuild the image, then start</span>
vvm<span class="w"> </span>--claude<span class="w">          </span><span class="c1"># Enable Claude Code and rebuild</span>
vvm<span class="w"> </span>--status<span class="w">          </span><span class="c1"># Show image, volume, and container state</span>
vvm<span class="w"> </span>--destroy<span class="w">         </span><span class="c1"># Remove the workspace volume</span>
vvm<span class="w"> </span>--help<span class="w">            </span><span class="c1"># Show usage information</span>
connect_vvm<span class="w">           </span><span class="c1"># Open a new shell in the running container</span>
</pre></div>
</div>
</section>
<section id="workspace-layout">
<h2>Workspace Layout<a class="headerlink" href="#workspace-layout" title="Link to this heading"></a></h2>
<p>Inside the container, <code class="docutils literal notranslate"><span class="pre">/workspace</span></code> contains all repositories:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/workspace/
<span class="w">  </span>vplanet/<span class="w">              </span><span class="c1"># VPLanet C source and Python package</span>
<span class="w">  </span>vplot/<span class="w">                </span><span class="c1"># Plotting package for VPLanet output</span>
<span class="w">  </span>vspace/<span class="w">               </span><span class="c1"># Parameter sweep generator</span>
<span class="w">  </span>bigplanet/<span class="w">            </span><span class="c1"># HDF5 compression and analysis</span>
<span class="w">  </span>multi-planet/<span class="w">         </span><span class="c1"># Multi-core simulation runner</span>
<span class="w">  </span>alabi/<span class="w">                </span><span class="c1"># Machine learning posterior inference</span>
<span class="w">  </span>vplanet_inference/<span class="w">    </span><span class="c1"># Interface for Bayesian inference</span>
<span class="w">  </span>MaxLEV/<span class="w">               </span><span class="c1"># Maximum likelihood estimator</span>
<span class="w">  </span>vplanet-private/<span class="w">      </span><span class="c1"># Development branch (if authenticated)</span>
</pre></div>
</div>
<p>The native <code class="docutils literal notranslate"><span class="pre">VPLanet</span></code> binary is on <code class="docutils literal notranslate"><span class="pre">PATH</span></code> at
<code class="docutils literal notranslate"><span class="pre">/workspace/vplanet/bin/vplanet</span></code>. If <code class="docutils literal notranslate"><span class="pre">vplanet-private</span></code> is available,
<code class="docutils literal notranslate"><span class="pre">VVM</span></code> builds from it instead and the binary path updates accordingly.</p>
<p>Standard development commands work as expected:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vplanet<span class="w"> </span>-v<span class="w">                                  </span><span class="c1"># Check VPLanet version</span>
<span class="nb">cd</span><span class="w"> </span>/workspace/vplanet<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>make<span class="w"> </span><span class="nb">test</span><span class="w">          </span><span class="c1"># Run VPLanet tests</span>
<span class="nb">cd</span><span class="w"> </span>/workspace/vspace<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>pytest<span class="w"> </span>tests/<span class="w"> </span>-x<span class="w">    </span><span class="c1"># Run vspace tests</span>
git<span class="w"> </span>status<span class="w">                                  </span><span class="c1"># Check repo state</span>
</pre></div>
</div>
</section>
<section id="persistence">
<h2>Persistence<a class="headerlink" href="#persistence" title="Link to this heading"></a></h2>
<p>Repositories persist in a Docker named volume (<code class="docutils literal notranslate"><span class="pre">vvm-workspace</span></code>) across
container restarts. <em>Cloned repos, local commits, and branch checkouts all
survive between sessions.</em> Only <code class="docutils literal notranslate"><span class="pre">vvm</span> <span class="pre">--destroy</span></code> removes the volume.</p>
<p>Git configuration (<code class="docutils literal notranslate"><span class="pre">~/.gitconfig</span></code>) is also stored on the volume, so
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.name</span></code> and <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">user.email</span></code>
only need to be set once.</p>
<p>The container itself is ephemeral (<code class="docutils literal notranslate"><span class="pre">--rm</span></code>). No container state persists
outside the volume.</p>
</section>
<section id="branch-management">
<h2>Branch Management<a class="headerlink" href="#branch-management" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> clones the default branch for each repository on first run (see
<code class="docutils literal notranslate"><span class="pre">repos.conf</span></code>). You can switch branches freely inside the container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/workspace/vplanet
git<span class="w"> </span>checkout<span class="w"> </span>my-feature-branch
</pre></div>
</div>
<p>On subsequent starts, <code class="docutils literal notranslate"><span class="pre">VVM</span></code> pulls the branch you are currently on. If you
have switched away from the default branch, <code class="docutils literal notranslate"><span class="pre">VVM</span></code> skips the pull and
prints a message.</p>
</section>
<section id="git-workflow">
<span id="id1"></span><h2>Git Workflow<a class="headerlink" href="#git-workflow" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> supports two workflows depending on your level of access.</p>
<p><strong>Standard workflow (fork and pull request):</strong></p>
<p>Most collaborators should fork the public repository on GitHub and submit
changes via pull request. Inside the container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/workspace/vplanet
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>myfork<span class="w"> </span>https://github.com/YOUR_USERNAME/vplanet.git
git<span class="w"> </span>checkout<span class="w"> </span>-b<span class="w"> </span>my-feature
<span class="c1"># ... make changes ...</span>
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;Description of changes&quot;</span>
git<span class="w"> </span>push<span class="w"> </span>myfork<span class="w"> </span>my-feature
</pre></div>
</div>
<p>Then open a pull request on GitHub from your fork’s branch to the main
repository. This is the standard open-source contribution workflow and
requires no special permissions.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You only need to add your fork as a remote once. The remote persists
in the workspace volume across container restarts.</p>
</div>
<p><strong>Direct push (vplanet-private developers only):</strong></p>
<p>Authorized collaborators with write access to <code class="docutils literal notranslate"><span class="pre">vplanet-private</span></code> can push
directly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/workspace/vplanet-private
git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>my-branch
</pre></div>
</div>
<p>This requires GitHub CLI authentication (see <a class="reference internal" href="install.html#private-repo-access"><span class="std std-ref">For vplanet-private Developers</span></a>).
Direct push access is being deprecated in favor of the fork and pull
request workflow described above.</p>
</section>
<section id="repos-conf">
<h2>repos.conf<a class="headerlink" href="#repos-conf" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">repos.conf</span></code> file defines which repositories <code class="docutils literal notranslate"><span class="pre">VVM</span></code> manages. Each
line specifies a repository name, GitHub URL, default branch, and install
method, separated by pipes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>name<span class="p">|</span>url<span class="p">|</span>branch<span class="p">|</span>install_method
</pre></div>
</div>
<p>Lines beginning with <code class="docutils literal notranslate"><span class="pre">#</span></code> are comments.</p>
<p><strong>Install methods:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">c_and_pip</span></code></p></td>
<td><p>Compile C binary with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">opt</span></code>, then <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span> <span class="pre">--no-deps</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pip_no_deps</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span> <span class="pre">--no-deps</span></code> (dependencies provided by Dockerfile)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pip_editable</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span></code> (standalone package, resolves its own deps)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">scripts_only</span></code></p></td>
<td><p>Add to <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code> and <code class="docutils literal notranslate"><span class="pre">PATH</span></code> only</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reference</span></code></p></td>
<td><p>Clone for reference, do not install</p></td>
</tr>
</tbody>
</table>
<p>Order matters: repositories are cloned and installed in the order listed.</p>
<p>To add a new repository, append a line to <code class="docutils literal notranslate"><span class="pre">repos.conf</span></code> and run
<code class="docutils literal notranslate"><span class="pre">vvm</span> <span class="pre">--build</span></code> to rebuild the image.</p>
</section>
<section id="display-forwarding">
<h2>Display Forwarding<a class="headerlink" href="#display-forwarding" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> forwards the host’s X11 display into the container so that
interactive matplotlib figures (<code class="docutils literal notranslate"><span class="pre">plt.show()</span></code>) render in a window on
your desktop.</p>
<p><strong>macOS</strong> requires <a class="reference external" href="https://www.xquartz.org/">XQuartz</a> and <code class="docutils literal notranslate"><span class="pre">xhost</span></code>,
both of which the installer sets up automatically. After installing
XQuartz, a one-time configuration step is needed:</p>
<ol class="arabic simple">
<li><p>Open <strong>XQuartz &gt; Settings &gt; Security</strong> and enable
<em>Allow connections from network clients</em>.</p></li>
<li><p>Log out of macOS and log back in (required once for the TCP listener
to activate).</p></li>
</ol>
<p>When you run <code class="docutils literal notranslate"><span class="pre">vvm</span></code>, it automatically:</p>
<ul class="simple">
<li><p>Starts XQuartz if it is not already running.</p></li>
<li><p>Runs <code class="docutils literal notranslate"><span class="pre">xhost</span> <span class="pre">+</span></code> to allow the container to connect.</p></li>
<li><p>Sets <code class="docutils literal notranslate"><span class="pre">DISPLAY=host.docker.internal:0</span></code> inside the container.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you installed XQuartz via MacPorts, you also need the <code class="docutils literal notranslate"><span class="pre">xhost</span></code>
package (<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">install</span> <span class="pre">xhost</span></code>). The Homebrew XQuartz cask
includes <code class="docutils literal notranslate"><span class="pre">xhost</span></code> already.</p>
</div>
<p><strong>Linux</strong> uses the host’s native X11 server. No extra setup is needed;
<code class="docutils literal notranslate"><span class="pre">VVM</span></code> grants container access via <code class="docutils literal notranslate"><span class="pre">xhost</span></code>, passes through
<code class="docutils literal notranslate"><span class="pre">$DISPLAY</span></code>, and mounts the X11 socket automatically.</p>
<p><strong>Troubleshooting display issues:</strong></p>
<p>If <code class="docutils literal notranslate"><span class="pre">plt.show()</span></code> does not open a window, check the following:</p>
<ol class="arabic">
<li><p>Verify XQuartz (macOS) or an X server (Linux) is running.</p></li>
<li><p>Confirm the one-time XQuartz configuration above was completed,
including the logout/login step.</p></li>
<li><p>Ensure the matplotlib backend is set to <code class="docutils literal notranslate"><span class="pre">TkAgg</span></code>, not <code class="docutils literal notranslate"><span class="pre">Agg</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib</span>
<span class="nb">print</span><span class="p">(</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">get_backend</span><span class="p">())</span>  <span class="c1"># Should print &quot;TkAgg&quot;</span>
</pre></div>
</div>
<p>If it prints <code class="docutils literal notranslate"><span class="pre">agg</span></code>, set the backend before importing pyplot:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s2">&quot;TkAgg&quot;</span><span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>Viewing standalone files:</strong></p>
<p>The container includes lightweight X11 viewers for opening images and
documents directly:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>eog<span class="w"> </span>figure.png<span class="w">          </span><span class="c1"># GNOME image viewer (PNG, JPG, TIFF, etc.)</span>
feh<span class="w"> </span>plot.png<span class="w">            </span><span class="c1"># Lightweight image viewer</span>
evince<span class="w"> </span>paper.pdf<span class="w">        </span><span class="c1"># PDF and PostScript viewer</span>
</pre></div>
</div>
<p>These viewers forward to the host display via X11, just like
<code class="docutils literal notranslate"><span class="pre">plt.show()</span></code>. If you prefer to view files on the host instead, use
<code class="docutils literal notranslate"><span class="pre">vvm_pull</span></code> to copy them out of the container first.</p>
</section>
<section id="installed-packages">
<span id="id2"></span><h2>Installed Packages<a class="headerlink" href="#installed-packages" title="Link to this heading"></a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">VVM</span></code> container image is built on Ubuntu 22.04 and includes the
following pre-installed software.</p>
<p><strong>System tools:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31.2%" />
<col style="width: 68.8%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">gcc</span></code>, <code class="docutils literal notranslate"><span class="pre">g++</span></code>, <code class="docutils literal notranslate"><span class="pre">make</span></code></p></td>
<td><p>C/C++ compilation toolchain</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">git</span></code></p></td>
<td><p>Version control</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">valgrind</span></code>, <code class="docutils literal notranslate"><span class="pre">lcov</span></code></p></td>
<td><p>Memory analysis and code coverage</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">nano</span></code>, <code class="docutils literal notranslate"><span class="pre">vim</span></code></p></td>
<td><p>Text editors</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">curl</span></code>, <code class="docutils literal notranslate"><span class="pre">gnupg</span></code></p></td>
<td><p>Network and security utilities</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">gosu</span></code>, <code class="docutils literal notranslate"><span class="pre">sudo</span></code></p></td>
<td><p>Privilege management</p></td>
</tr>
</tbody>
</table>
<p><strong>X11 viewers (display via host):</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31.2%" />
<col style="width: 68.8%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">eog</span></code></p></td>
<td><p>GNOME image viewer (PNG, JPG, TIFF, BMP, SVG)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">evince</span></code></p></td>
<td><p>PDF and PostScript viewer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">feh</span></code></p></td>
<td><p>Lightweight command-line image viewer</p></td>
</tr>
</tbody>
</table>
<p><strong>LaTeX (for matplotlib TeX rendering):</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 31.2%" />
<col style="width: 68.8%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">texlive-latex-base</span></code></p></td>
<td><p>Core LaTeX distribution</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">texlive-latex-extra</span></code></p></td>
<td><p>Additional LaTeX packages</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">texlive-fonts-recommended</span></code></p></td>
<td><p>Standard fonts</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cm-super</span></code>, <code class="docutils literal notranslate"><span class="pre">dvipng</span></code></p></td>
<td><p>Computer Modern fonts and DVI-to-PNG conversion</p></td>
</tr>
</tbody>
</table>
<p><strong>Python 3.11 packages:</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 37.5%" />
<col style="width: 62.5%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">scipy</span></code></p></td>
<td><p>Numerical computing</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, <code class="docutils literal notranslate"><span class="pre">seaborn</span></code></p></td>
<td><p>Plotting and visualization</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">astropy</span></code></p></td>
<td><p>Astronomy utilities</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">h5py</span></code>, <code class="docutils literal notranslate"><span class="pre">pandas</span></code></p></td>
<td><p>Data storage and analysis</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">emcee</span></code>, <code class="docutils literal notranslate"><span class="pre">dynesty</span></code></p></td>
<td><p>MCMC and nested sampling</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">george</span></code></p></td>
<td><p>Gaussian process regression</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">corner</span></code></p></td>
<td><p>Corner plots for posterior distributions</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code>, <code class="docutils literal notranslate"><span class="pre">scikit-optimize</span></code></p></td>
<td><p>Machine learning and optimization</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SALib</span></code></p></td>
<td><p>Sensitivity analysis (Sobol indices)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pytest</span></code>, <code class="docutils literal notranslate"><span class="pre">pytest-cov</span></code></p></td>
<td><p>Testing framework and coverage</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tqdm</span></code></p></td>
<td><p>Progress bars</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">setuptools</span></code>, <code class="docutils literal notranslate"><span class="pre">wheel</span></code>, <code class="docutils literal notranslate"><span class="pre">pybind11</span></code></p></td>
<td><p>Build tools</p></td>
</tr>
</tbody>
</table>
<p>All Python packages are pre-installed in a single layer so that editable
installs of the workspace repositories (<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.</span> <span class="pre">--no-deps</span></code>)
resolve instantly without downloading dependencies.</p>
</section>
<section id="vs-code">
<h2>VS Code<a class="headerlink" href="#vs-code" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> includes a Dev Containers configuration for
<a class="reference external" href="https://code.visualstudio.com/">VS Code</a>. Both options below require
the <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">Dev Containers</a>
extension. Install it from the Extensions panel (<code class="docutils literal notranslate"><span class="pre">Cmd+Shift+X</span></code> on
macOS, <code class="docutils literal notranslate"><span class="pre">Ctrl+Shift+X</span></code> on Linux) by searching for “Dev Containers.”</p>
<p><strong>Option A: Attach to a running container</strong></p>
<ol class="arabic simple">
<li><p>Start the container from the terminal: <code class="docutils literal notranslate"><span class="pre">vvm</span></code></p></li>
<li><p>In VS Code, press <code class="docutils literal notranslate"><span class="pre">Cmd+Shift+P</span></code> (macOS) or <code class="docutils literal notranslate"><span class="pre">Ctrl+Shift+P</span></code> (Linux)</p></li>
<li><p>Select <strong>Dev Containers: Attach to Running Container</strong></p></li>
<li><p>Choose the <code class="docutils literal notranslate"><span class="pre">vvm</span></code> container</p></li>
<li><p>VS Code opens a new window connected to <code class="docutils literal notranslate"><span class="pre">/workspace</span></code></p></li>
</ol>
<p><strong>Option B: Open directly in Dev Container</strong></p>
<ol class="arabic simple">
<li><p>Open the <code class="docutils literal notranslate"><span class="pre">vvm</span></code> repository folder in VS Code</p></li>
<li><p>VS Code detects <code class="docutils literal notranslate"><span class="pre">.devcontainer/devcontainer.json</span></code> and prompts to
reopen in container</p></li>
<li><p>Click <strong>Reopen in Container</strong></p></li>
<li><p>VS Code builds the image, starts the container, runs the entrypoint,
and connects automatically</p></li>
</ol>
<p>Option B installs the GitHub CLI inside the container and forwards
your host credentials, so <code class="docutils literal notranslate"><span class="pre">gh</span> <span class="pre">auth</span> <span class="pre">login</span></code> on the host is sufficient.</p>
<p>Both options install the Python and C/C++ extensions inside the container
automatically.</p>
</section>
<section id="claude-code-optional">
<h2>Claude Code (Optional)<a class="headerlink" href="#claude-code-optional" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://docs.anthropic.com/en/docs/claude-code">Claude Code</a> is an
AI coding assistant that can be installed inside the container for
interactive development sessions. It is not included in the default image.</p>
<p><strong>Option 1: Enable after installation</strong></p>
<p>If <code class="docutils literal notranslate"><span class="pre">VVM</span></code> is already installed, enable Claude Code and rebuild the image
in one step:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vvm<span class="w"> </span>--claude
</pre></div>
</div>
<p>This creates a <code class="docutils literal notranslate"><span class="pre">.claude_enabled</span></code> marker, rebuilds the base image, and
layers the <code class="docutils literal notranslate"><span class="pre">Dockerfile.claude</span></code> overlay on top (adding Node.js and Claude
Code). On subsequent runs, <code class="docutils literal notranslate"><span class="pre">vvm</span></code> and <code class="docutils literal notranslate"><span class="pre">vvm</span> <span class="pre">--build</span></code> will include the
Claude overlay automatically.</p>
<p><strong>Option 2: Enable during initial setup</strong></p>
<p>Pass <code class="docutils literal notranslate"><span class="pre">--claude</span></code> when running the installer:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sh<span class="w"> </span>installVvm.sh<span class="w"> </span>--claude
</pre></div>
</div>
<p>The Claude Code overlay will be built automatically on the first <code class="docutils literal notranslate"><span class="pre">vvm</span></code>
run.</p>
<p><strong>Option 3: Install manually inside the container</strong></p>
<p>If you prefer not to bake Claude Code into the image, you can install it
at any time inside a running container. Note that manual installs do not
persist across container restarts (use <code class="docutils literal notranslate"><span class="pre">vvm</span> <span class="pre">--claude</span></code> instead for a
permanent solution). The container runs as the <code class="docutils literal notranslate"><span class="pre">vplanet</span></code> user, so use
<code class="docutils literal notranslate"><span class="pre">sudo</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;curl -fsSL https://deb.nodesource.com/setup_20.x | bash - \</span>
<span class="s1">    &amp;&amp; apt-get install -y nodejs \</span>
<span class="s1">    &amp;&amp; npm install -g @anthropic-ai/claude-code&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> automatically persists Claude Code’s configuration in the
workspace volume at <code class="docutils literal notranslate"><span class="pre">/workspace/.claude/</span></code>, so you only need to
authenticate once. To start Claude Code in a specific repository:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/workspace/vplanet
claude
</pre></div>
</div>
</section>
<section id="container-utilities">
<h2>Container Utilities<a class="headerlink" href="#container-utilities" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> includes utility scripts for working with the container.</p>
<p><strong>connect_vvm</strong> opens a new shell session in an already-running container.
This is useful when you want a second terminal inside the container while
your first session is still active:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>connect_vvm
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">connect_vvm</span></code> command is available on the host after running the
installer. It is equivalent to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">exec</span> <span class="pre">-it</span> <span class="pre">-u</span> <span class="pre">vplanet</span> <span class="pre">vvm</span> <span class="pre">bash</span></code>.</p>
<p><strong>checkIsolation.sh</strong> verifies that the container’s filesystem is
isolated from the host. It is located in the <code class="docutils literal notranslate"><span class="pre">vplanet</span></code> user’s home
directory and can be run inside the container:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>~/checkIsolation.sh
</pre></div>
</div>
<p>The script checks for host bind mounts, listening network ports, Docker
socket access, and privileged mode. All checks should pass under normal
<code class="docutils literal notranslate"><span class="pre">VVM</span></code> operation.</p>
<section id="tab-completion">
<h3>Tab Completion<a class="headerlink" href="#tab-completion" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> provides tab-completion for <code class="docutils literal notranslate"><span class="pre">vvm</span></code>, <code class="docutils literal notranslate"><span class="pre">vvm_push</span></code>, and <code class="docutils literal notranslate"><span class="pre">vvm_pull</span></code>
in bash and zsh. The installer configures completion automatically.</p>
<p><strong>vvm</strong> completes command-line flags (<code class="docutils literal notranslate"><span class="pre">--build</span></code>, <code class="docutils literal notranslate"><span class="pre">--status</span></code>,
<code class="docutils literal notranslate"><span class="pre">--destroy</span></code>, <code class="docutils literal notranslate"><span class="pre">--help</span></code>).</p>
<p><strong>vvm_pull</strong> completes container paths for all positional arguments.
Pressing <code class="docutils literal notranslate"><span class="pre">Tab</span></code> queries the running container’s <code class="docutils literal notranslate"><span class="pre">/workspace</span></code> directory
and offers matching entries. Directories appear with a trailing <code class="docutils literal notranslate"><span class="pre">/</span></code> so
you can continue typing into subdirectories. If the container is not
running, completion silently falls back to local file paths.</p>
<p><strong>vvm_push</strong> completes local file paths for source arguments (the default
behavior) and switches to container path completion for the destination
argument. Once at least one source path has been typed, subsequent
arguments offer container path completion.</p>
<p>Options (<code class="docutils literal notranslate"><span class="pre">-a</span></code>, <code class="docutils literal notranslate"><span class="pre">-L</span></code>, <code class="docutils literal notranslate"><span class="pre">-r</span></code>, <code class="docutils literal notranslate"><span class="pre">-R</span></code>, <code class="docutils literal notranslate"><span class="pre">--help</span></code>) are completed for
both <code class="docutils literal notranslate"><span class="pre">vvm_push</span></code> and <code class="docutils literal notranslate"><span class="pre">vvm_pull</span></code> when the current word starts with
<code class="docutils literal notranslate"><span class="pre">-</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vvm_pull<span class="w"> </span>vpl&lt;Tab&gt;
<span class="c1"># Completes to: vplanet/ vplot/ vplanet-private/ ...</span>

vvm_push<span class="w"> </span>results.h5<span class="w"> </span>Max&lt;Tab&gt;
<span class="c1"># Completes to: MaxLEV/</span>
</pre></div>
</div>
<p>If completions are not working, ensure your shell configuration sources
the completion file. The installer adds a line like this to your shell
RC file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Added by VVM installer</span>
<span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;/path/to/vvm/completions/vvm.bash&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>.<span class="w"> </span><span class="s2">&quot;/path/to/vvm/completions/vvm.bash&quot;</span>
</pre></div>
</div>
<p>Open a new terminal or source the file manually for the change to take
effect.</p>
</section>
</section>
<section id="resource-allocation">
<h2>Resource Allocation<a class="headerlink" href="#resource-allocation" title="Link to this heading"></a></h2>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> allocates N-1 CPU cores to the container, where N is the host’s
total core count. Memory is managed by Colima on macOS (set via
<code class="docutils literal notranslate"><span class="pre">colima</span> <span class="pre">start</span> <span class="pre">--memory</span></code>) or by Docker Engine on Linux.</p>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<p>This section covers common issues you may encounter. If you are new to
Docker, see the <span class="xref std std-ref">what-is-docker</span> note below.</p>
<p><strong>Docker daemon is not running (macOS):</strong></p>
<p>Docker on macOS runs inside a lightweight virtual machine called Colima.
If you see this error, Colima needs to be started:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colima<span class="w"> </span>start<span class="w"> </span>--cpu<span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="k">$(</span>sysctl<span class="w"> </span>-n<span class="w"> </span>hw.ncpu<span class="k">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">))</span><span class="w"> </span>--memory<span class="w"> </span><span class="m">8</span>
</pre></div>
</div>
<p>You need to run this once after each reboot. Colima stays running in the
background until you shut down your computer.</p>
<p><strong>Docker daemon is not running (Linux):</strong></p>
<p>The Docker service needs to be started:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>docker
</pre></div>
</div>
<p>To make Docker start automatically on boot:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>docker
</pre></div>
</div>
<p><strong>Permission denied when running Docker (Linux):</strong></p>
<p>Your user account needs to be in the <code class="docutils literal notranslate"><span class="pre">docker</span></code> group:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>usermod<span class="w"> </span>-aG<span class="w"> </span>docker<span class="w"> </span><span class="nv">$USER</span>
</pre></div>
</div>
<p>Log out and back in for this to take effect. To apply the change in
your current terminal without logging out:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>newgrp<span class="w"> </span>docker
</pre></div>
</div>
<p><strong>Repository clone fails:</strong></p>
<p>If a public repository fails to clone, check your internet connection and
firewall settings. <code class="docutils literal notranslate"><span class="pre">VVM</span></code> clones from <code class="docutils literal notranslate"><span class="pre">github.com</span></code> via HTTPS, so port
443 must be open.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">vplanet-private</span></code> fails to clone, this is expected for users without
access to the private repository. <code class="docutils literal notranslate"><span class="pre">VVM</span></code> will continue with the public
<code class="docutils literal notranslate"><span class="pre">vplanet</span></code> repository instead. If you should have access, see
<a class="reference internal" href="install.html#private-repo-access"><span class="std std-ref">For vplanet-private Developers</span></a>.</p>
<p><strong>VPLanet build fails:</strong></p>
<p>The <code class="docutils literal notranslate"><span class="pre">VPLanet</span></code> C binary requires <code class="docutils literal notranslate"><span class="pre">gcc</span></code> and <code class="docutils literal notranslate"><span class="pre">make</span></code>, which are included
in the container image. If the build fails, the most common cause is a
corrupted repository. Try starting fresh:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vvm<span class="w"> </span>--destroy
vvm
</pre></div>
</div>
<p><strong>Pull skipped for a repository:</strong></p>
<p>This means you have local commits that have diverged from the remote.
<code class="docutils literal notranslate"><span class="pre">VVM</span></code> uses <code class="docutils literal notranslate"><span class="pre">--ff-only</span></code> pulls to avoid overwriting your work. To update
manually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>/workspace/vplanet
git<span class="w"> </span>pull<span class="w"> </span>--rebase
</pre></div>
</div>
<p><strong>Image rebuild needed after editing repos.conf:</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">VVM</span></code> detects changes to <code class="docutils literal notranslate"><span class="pre">Dockerfile</span></code>, <code class="docutils literal notranslate"><span class="pre">entrypoint.sh</span></code>, and
<code class="docutils literal notranslate"><span class="pre">repos.conf</span></code> and rebuilds automatically. To force a full rebuild:
<code class="docutils literal notranslate"><span class="pre">vvm</span> <span class="pre">--build</span></code>.</p>
<p><strong>Container uses too much memory:</strong></p>
<p>On macOS, Colima’s memory limit is set at startup. To increase it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colima<span class="w"> </span>stop
colima<span class="w"> </span>start<span class="w"> </span>--cpu<span class="w"> </span><span class="k">$((</span><span class="w"> </span><span class="k">$(</span>sysctl<span class="w"> </span>-n<span class="w"> </span>hw.ncpu<span class="k">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="k">))</span><span class="w"> </span>--memory<span class="w"> </span><span class="m">16</span>
</pre></div>
</div>
<p>On Linux, Docker uses host memory directly. If the container is consuming
too much memory, close other applications or increase your swap space.</p>
<p><strong>Starting fresh:</strong></p>
<p>To remove all cloned repositories and start over:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>vvm<span class="w"> </span>--destroy
vvm
</pre></div>
</div>
<div class="admonition note" id="what-is-docker">
<p class="admonition-title">Note</p>
<p><strong>What is Docker?</strong></p>
<p>Docker is a tool that creates isolated environments called
“containers.” A container is like a lightweight virtual machine: it has
its own operating system, files, and installed software, completely
separate from your computer. VVM uses Docker to ensure that everyone
gets the same development environment regardless of what operating
system or software versions they have on their own machine. Nothing
that happens inside the container can affect your computer’s files.</p>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quick Start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="security.html" class="btn btn-neutral float-right" title="Authentication and Security" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, The VPLanet Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>